<!DOCTYPE html>
<html>
<head>
    <title>Test Forgot Password</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="scripts/firebase-config.js"></script>
    <script src="scripts/auth.js"></script>
</head>
<body>
    <div>
        <h1>Test Forgot Password Functionality</h1>
        <input type="email" id="test-email" placeholder="Enter email" value="test@example.com">
        <button id="test-forgot-password">Test Forgot Password</button>
        <div id="result"></div>
    </div>

    <script>
        $(document).ready(function() {
            // Initialize Firebase auth
            auth.initialize();
            
            $('#test-forgot-password').on('click', function() {
                const email = $('#test-email').val();
                console.log('Testing forgot password for:', email);
                
                $('#result').html('Sending password reset email...');
                
                if (!auth.sendPasswordResetEmail) {
                    $('#result').html('❌ Error: sendPasswordResetEmail function not found');
                    return;
                }
                
                auth.sendPasswordResetEmail(email)
                    .then(() => {
                        $('#result').html('✅ Password reset email sent successfully!');
                        console.log('Success: Password reset email sent');
                    })
                    .catch(error => {
                        $('#result').html('❌ Error: ' + error.message);
                        console.error('Error:', error);
                    });
            });
            
            // Add test to check if auth object is properly initialized
            setTimeout(() => {
                console.log('Auth object:', auth);
                console.log('sendPasswordResetEmail function:', auth.sendPasswordResetEmail);
            }, 1000);
        });
    </script>
</body>
</html>